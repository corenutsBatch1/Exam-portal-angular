<button class="arrowbutton" (click)="goBack()"> <mat-icon>arrow_back</mat-icon>
</button>

<!-- -------------------------------pie chart-------------- -->

<ng-container>

  <div class="userexampage">
    <div class="col-lg-4 canvasheading">
     <h1 class="text-center ml-6" >Exam Report for User's</h1>
   </div>
   <img *ngIf="username3 && examname && totalmarks && gotmarks" id="pdf-icon"  (click)="generatePDF()" src="assets/5467016.svg" alt="pdf">
   <!-- <label for="" class="canvassearch">Enter the exam code &nbsp;</label>
   <input type="text" [(ngModel)]="examcode1"/> &nbsp; -->
   <!-- <mat-form-field appearance="fill" classs="left">
   <mat-label>Select a examcode</mat-label>
    <mat-select
     [(ngModel)]="selectedcode" name="selectedSubject" (selectionChange)="oncodeSelection()">
     <mat-option
       *ngFor="let subject of uniqueexamcodes"
       [value]="subject">{{ subject }}</mat-option>
   </mat-select>
 </mat-form-field> -->





   <!-- <label for="" class="canvassearch">Enter the user name &nbsp;</label>
   <input type="text" [(ngModel)]="username2"/> &nbsp; -->
   <!-- <mat-form-field appearance="fill" classs="left">
    <mat-label>Select a user</mat-label>
     <mat-select
     [(ngModel)]="username2" name="selectedSubject" (selectionChange)="examresult(username2,codeControl.value)">
      <mat-option
        *ngFor="let subject of usernames"
        [value]="subject">{{ subject }}</mat-option>
    </mat-select>
  </mat-form-field> -->
   <!-- <button class="btn-sm btn-primary" type="submit" (click)="examresult(username2,examcode1)">
     Submit
   </button> -->
   <!-- Add [(ngModel)]="username2" and (ngModelChange)="onUsernameChange()" to the input -->
   <mat-form-field appearance="fill" class="left">
    <mat-label>Select an exam code</mat-label>
    <input type="text" matInput [formControl]="codeControl" [matAutocomplete]="auto" />
    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="oncodeSelection()">
      <mat-option *ngFor="let code of filteredCodes" [value]="code">
        {{ code }}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>
  <!-- <mat-form-field appearance="fill" class="left">
    <mat-label>Select a username</mat-label>
    <input type="text" matInput [formControl]="usernamecontrol" [matAutocomplete]="auto2" (input)="onUsernameChange()" />
    <mat-autocomplete #auto2="matAutocomplete">
      <mat-option *ngFor="let name of filteredUsernames">
        {{ name }}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field> -->
  <mat-form-field appearance="fill" class="left">
    <mat-label>Select an exam code</mat-label>
    <input type="text" matInput [formControl]="usernamecontrol" [matAutocomplete]="auto2" />
    <mat-autocomplete #auto2="matAutocomplete" (optionSelected)="examresult(username2,codeControl.value)">
      <mat-option *ngFor="let code of filteredUsernames" [value]="code">
        {{ code }}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>




   <div></div>
   <div class="bootstrap-wrapper" id="result" *ngIf="username3 && examname">
    <div class="container">
      <div class="row">
        <mat-card class="card col-md-8">
          <div class="card-body">
            <div class="d-flex align-items-center justify-content-center">
              <div class="left">
                <mat-icon class="mat-24" style="margin-right: 10px;">person</mat-icon>
              </div>

              <div class="right float-right">
                <h1><b>User Exam Result</b></h1>
              </div>
            </div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item"><strong>USER NAME:</strong> {{this.username3}}</li>
              <li class="list-group-item"><strong>EXAM NAME:</strong> {{this.examname}}</li>
              <li class="list-group-item"><strong>TOTAL MARKS:</strong> {{ this.totalmarks}}</li>
              <li class="list-group-item"><strong>MARKS:</strong> {{ this.gotmarks}}</li>
            </ul>
          </div>
          <mat-list *ngFor="let question of questions; let i=index">

            <span style="display: inline-block">{{ i + 1 }}. </span>
             <span style="display: inline-block" [innerHTML]="question.content"></span>
            <div *ngIf="question.subject?.name == 'CODING'">
              <mat-list-item>
                <div style="white-space:nowrap">
                    <!-- <input class="radiobutton" type="radio" [name]="'answer'+question.id" value="A" /> -->
                    <!-- <label class="option">A : {{ question.optionA }}</label> -->
                    <div  *ngIf="correct == 'correct'" style="color:rgb(0, 255, 51);font-size: large;" >Your Code is Correct

                    </div>
                    <div *ngIf="correct != 'correct'"  style="color: red;font-size: large;" >Your Code is Wrong

                    </div>
                </div>
              </mat-list-item>
            </div>
            <div *ngIf="question.subject?.name != 'CODING'">
              <mat-list-item>
                <div style="white-space:nowrap">
                    <!-- <input class="radiobutton" type="radio" [name]="'answer'+question.id" value="A" /> -->
                    <label class="option">A : {{ question.optionA }}</label>
                </div>
              </mat-list-item>

              <mat-list-item>
                <div style="white-space:nowrap">
                  <!-- <input class="radiobutton" type="radio" [name]="'answer'+question.id" value="B" /> -->
                  <label class="option">B : {{ question.optionB }}</label>
                </div>
              </mat-list-item>

              <mat-list-item>
                <div class="white-space:nowrap">
                  <!-- <input class="radiobutton" type="radio" [name]="'answer'+question.id" value="C" /> -->
                  <label class="option">C : {{ question.optionC }}</label>
                </div>
              </mat-list-item>

              <mat-list-item>
               <div class="white-space:nowrap">
                <!-- <input class="radiobutton" type="" [name]="'answer'+question.id" value="D" /> -->
                  <label class="option">D : {{ question.optionD }}</label>
               </div>
              </mat-list-item>
              <mat-list-item>
                <div class="white-space:nowrap" *ngFor="let answer of userAnswers">
                  <label class="option" style="color: red;font-size: large;" *ngIf="question.id==answer.question?.id && answer.userAnswer!=question.answer">YourAnswer : {{ answer.userAnswer}}</label>
                  <label class="option" style="color:rgb(0, 255, 51);font-size: large;" *ngIf="question.id==answer.question?.id && answer.userAnswer==question.answer ">YourAnswer : {{ answer.userAnswer}}</label>
                </div>
               </mat-list-item>
              <mat-list-item>
                <div class="white-space:nowrap">
                  <label class="option" style="color: rgb(7, 7, 245);font-size: large;">CorrectAnswer : {{ question.answer}}</label>
                </div>
               </mat-list-item>

            </div>
          </mat-list>
        </mat-card>
      </div>
    </div>
  </div>
   </div>
</ng-container>
